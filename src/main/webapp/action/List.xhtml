<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/template.xhtml">
        <!--    <h:head>
                <title>Goal/Action/Contrainte/Resultat</title>
                <h:outputStylesheet name="css/jsfcrud.css"/>
                <h:outputStylesheet library="css" name="bootstrap.css"/>
            </h:head>
        -->
        <ui:define name="title">
            <h:outputText value="Goal/Action/Contrainte/Resultat"></h:outputText>
        </ui:define>

        <ui:define name="body">
            <h:form id="mainForm">
                <p:tabView id="tabView" cache="false">
                    <p:tab title="Goal/Action">
                        <div class="container-fluid"><br></br>
                            <div class="row">
                                <div class="col-md-4"></div>
                                <div class="col-md-4">
                                    <!--<h:form id="goalForm">-->
                                    <p:growl id="growl" showDetail="true" sticky="true" />
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Goal/Action</h3>
                                        </div>
                                        <div class="panel-body">
                                            <h:panelGrid columns="2">
                                                <p:outputLabel value="Nom du Goal:" for="nom" style="font-weight: bold;"/>
                                                <p:inputText id="nom" value="#{actionController.goal.nom}" title="Nom" required="true" />

                                                <p:outputLabel value="Domaine:" for="domaineAssocie" style="font-weight: bold;"/>
                                                <p:selectOneMenu id="domaineAssocie" value="#{actionController.goal.domaine}" required="true">
                                                    <f:selectItem itemValue="#{domaineItem}" itemLabel="--SELECT--"/>
                                                    <f:selectItems value="#{actionController.findDomaines()}"
                                                                   var="domaineItem"
                                                                   itemValue="#{domaineItem}" itemLabel="#{domaineItem.nom}"/>
                                                </p:selectOneMenu>

                                                <p:outputLabel value="Nom Action: " for="action" style="font-weight: bold;"/>
                                                <p:inputText id="action" value="#{actionController.selected.nom}" title="Nom" required="true"/>

                                                <p:commandButton id="GoalButton" value="Ajouter" actionListener="#{actionController.saveGoal()}" update="growl" />
                                            </h:panelGrid>
                                        </div>
                                    </div>
                                    <!--</h:form>-->
                                </div>
                                <div class="col-md-4"></div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <!--<h:form id="processusListForm">-->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Processus</h3>
                                        </div>
                                        <div class="panel-body">
                                            <h:panelGrid columns="3">
                                                <p:outputLabel value="Processus: " for="processus" style="font-weight: bold;" />
                                                <p:inputText id="processus" value="#{actionController.processus.nom}" title="Nom" />
                                                <p:commandButton id="ajoutProcessusButton" icon="ui-icon-plus" actionListener="#{actionController.addProcessus()}" update="datalistProcessus,growl"/>
                                            </h:panelGrid>
                                            <p:separator></p:separator>
                                            <p:dataTable id="datalistProcessus" value="#{actionController.processuses}" var="item"
                                                         selectionMode="single" selection="#{actionController.selectedProcessus}"
                                                         paginator="true"
                                                         rowKey="#{item.nom}"
                                                         rows="10"
                                                         rowsPerPageTemplate="10,20,30,40,50"
                                                         >

                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Nom"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Action"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.action.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Steps"/>
                                                    </f:facet>
                                                    <p:commandButton id="stepsButton" icon="ui-icon-plus" actionListener="#{actionController.prepareCreate}" update=":StepCreateForm" oncomplete="PF('StepCreateDialog').show()"/>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <!--</h:form>-->
                                </div>
                                <div class="col-md-6">
                                    <!--<h:form id="stepsListForm">-->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Steps</h3>
                                        </div>
                                        <div class="panel-body">
                                            <p:dataTable id="datalistStep" value="#{actionController.steps}" var="item"
                                                         selection="#{actionController.selectedStep}"
                                                         paginator="true"
                                                         rows="10"
                                                         rowsPerPageTemplate="10,20,30,40,50"
                                                         >

                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Processus"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.processus.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Nom"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="ProvideInterfaceItem"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.provideInterfaceItem.nom}"/>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <!--</h:form>-->
                                </div>
                            </div>
                            <!--<h:form>-->
                            <h:commandButton id="suivantButton" class="btn btn-default" value="Suivant" actionListener="#{actionController.versContrainte()}" style="float:right;"/>
                            <!--</h:form>-->

                        </div>

                    </p:tab>
                    <p:tab title="Contrainte" id="t2">
                        <p:growl id="growl2" showDetail="true" sticky="true" />
                        <div class="container-fluid"><br></br>
                            <div class="row">
                                <div class="col-md-5">
                                   <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">CONTRAINTE</h3>
                                        </div>
                                        <h:panelGrid columns="3">
                                            <p:outputLabel value="NomContrainte" for="contrainteName" />
                                            <p:inputText id="contrainteName" value="#{actionController.contrainte.nom}"/>
                                            <p:commandButton id="createCButton" icon="ui-icon-plus" value="Ajouter"  actionListener="#{actionController.saveContrainte()}" update="growl2"/>
                                        </h:panelGrid> 
                                    </div>

                                </div>
                                <div class="col-md-5">
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">ContrainteItem</h3>
                                        </div>
                                        <h:panelGrid columns="2">
                                            <p:outputLabel value="Step" for="step" />
                                            <p:selectOneMenu id="step" value="#{actionController.step1}" >
                                                <f:selectItem itemLabel=" SELECT " itemValue="#{null}"/>
                                                <f:selectItems value="#{actionController.findSteps()}"
                                                               var="stepItem"
                                                               itemValue="#{stepItem}" itemLabel="#{stepItem.nom}"/>
                                            </p:selectOneMenu>

                                            <p:outputLabel value="Attribut" for="attribut" />
                                            <p:inputText id="attribut" value="#{actionController.contrainteItem.attribut}" />

                                            <p:outputLabel value="Critere" for="critere"  />
                                            <p:selectOneMenu id="critere" value="#{actionController.contrainteItem.critere}" >
                                                <f:selectItem itemValue="0" itemLabel="--SELECT--"/> 
                                                <f:selectItem itemValue="egal" itemLabel="Egal"/>
                                                <f:selectItem itemValue="inferieur" itemLabel="Inférieur"/>
                                                <f:selectItem itemValue="superieur" itemLabel="Supérieur"/>
                                            </p:selectOneMenu>

                                            <p:outputLabel value="ValeurCritique"  />
                                            <p:commandButton id="createVCButton" icon="ui-icon-plus"   actionListener="#{actionController.prepareCreate2}" update=":ValeurCritiqueCreateForm" oncomplete="PF('ValeurCritiqueCreateDialog').show()"/>
                                            <p:commandButton id="refreshButton" icon="ui-icon-arrowrefresh-1-e"   actionListener="#{actionController.vider()}" update="attribut,critere"/>

                                        </h:panelGrid>
                                      </div>
                                </div>
                                <div class="col-md-2">
                                    <p:commandButton id="createAll"  value="Save" class="btn btn-default" actionListener="#{actionController.saveAllContrainteAndItems()}" update="growl2" style="float:right;" />
                                </div>
                            </div>
                        </div>
                        <br></br>
                        <div class="row">
                           <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">ContrainteItemListForm</h3>
                                        </div>
                                <p:dataTable id="datalistC" value="#{actionController.contrainteItems}" var="item"
                                             selectionMode="single" selection="#{actionController.contrainteItemSelected2}"
                                             paginator="true"
                                             rowKey="#{item.id}"
                                             rows="10"
                                             rowsPerPageTemplate="10,20,30,40,50"
                                             >


                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Step"/>
                                        </f:facet>
                                        <h:outputText value="#{item.step.nom}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Attribut"/>
                                        </f:facet>
                                        <h:outputText value="#{item.attribut}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Critère"/>
                                        </f:facet>
                                        <h:outputText value="#{item.critere}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="ValeurCritique"/>
                                        </f:facet>
                                        <h:outputText value="#{item.valeurCritique.valeur}"/>
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="ValeurCritique Type"/>
                                        </f:facet>
                                        <h:outputText value="#{item.valeurCritique.type}"/>
                                    </p:column>

                                </p:dataTable>
                             </div>
                        </div>

                        <!--</h:form>-->
                    </p:tab>




                    <p:tab title="Resultat">
                        <h:panelGrid columns="2" cellpadding="10">
                            <h:outputText value="After a break of more than 15 years..." />
                        </h:panelGrid>

                    </p:tab>
                </p:tabView>
            </h:form>


            <ui:include src="/step/Create.xhtml"/> 
            <ui:include src="CreateValeurCritique.xhtml"/> 

        </ui:define>
    </ui:composition>
</html>

