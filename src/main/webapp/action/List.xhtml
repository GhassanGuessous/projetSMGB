<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/template.xhtml">

        <ui:define name="title">
            <h:outputText value="Goal/Action/Contrainte/Resultat"></h:outputText>
        </ui:define>

        <ui:define name="body">
            <h:form id="mainForm">
                <p:tabView id="tabView" cache="false">
                    <p:tab title="Goal/Action">
                        <div class="container-fluid"><br></br>
                            <!--                            <div class="row">
                                                            <div class="col-md-4"></div>
                                                            
                                                            <div class="col-md-2"><br></br><br></br><br></br><br></br>
                                                                
                                                            </div>
                                                        </div>-->
                            <div class="row">
                                <div class="col-md-3">
                                    <!--<h:form id="goalForm">-->
                                    <p:growl id="growl" showDetail="true" sticky="true" />
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Goal/Action</h3>
                                        </div>
                                        <div class="panel-body">
                                            <h:panelGrid columns="2">
                                                <p:outputLabel value="Nom du Goal:" for="nom" style="font-weight: bold;"/>
                                                <p:inputText id="nom" value="#{actionController.goal.nom}" title="Nom" required="true" />

                                                <p:outputLabel value="Domaine:" for="domaineAssocie" style="font-weight: bold;"/>
                                                <p:selectOneMenu id="domaineAssocie" value="#{actionController.goal.domaine}" required="true">
                                                    <f:selectItem itemValue="#{domaineItem}" itemLabel="--SELECT--"/>
                                                    <f:selectItems value="#{actionController.findDomaines()}"
                                                                   var="domaineItem"
                                                                   itemValue="#{domaineItem}" itemLabel="#{domaineItem.nom}"/>
                                                </p:selectOneMenu>

                                                <p:outputLabel value="Nom Action: " for="action" style="font-weight: bold;"/>
                                                <p:inputText id="action" value="#{actionController.selected.nom}" title="Nom" required="true"/>

                                            </h:panelGrid>
                                            <p:commandButton id="GoalButton" icon="ui-icon-plus" actionListener="#{actionController.saveGoal()}" update="growl" style="width: 100%"/>
                                        </div>
                                    </div>
                                    <!--</h:form>-->
                                </div>
                                <div class="col-md-4">
                                    <!--<h:form id="processusListForm">-->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Processus</h3>
                                        </div>
                                        <div class="panel-body">
                                            <h:panelGrid columns="3">
                                                <p:outputLabel value="Processus: " for="processus" style="font-weight: bold;" />
                                                <p:inputText id="processus" value="#{actionController.processus.nom}" title="Nom" />
                                                <p:commandButton id="ajoutProcessusButton" icon="ui-icon-plus" actionListener="#{actionController.addProcessus()}" update="datalistProcessus,growl"/>
                                            </h:panelGrid>
                                            <p:separator></p:separator>
                                            <p:dataTable id="datalistProcessus" value="#{actionController.processuses}" var="item"
                                                         selection="#{actionController.selectedProcessus}"
                                                         paginator="true"
                                                         rowKey="#{item.nom}"
                                                         rows="10"
                                                         rowsPerPageTemplate="10,20,30,40,50"
                                                         >

                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Nom"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Steps"/>
                                                    </f:facet>
                                                    <p:commandButton id="stepsButton" icon="ui-icon-plus" actionListener="#{actionController.prepareCreate(item)}" update=":StepCreateForm" oncomplete="PF('StepCreateDialog').show()"/>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <!--</h:form>-->
                                </div>
                                <div class="col-md-5">
                                    <!--<h:form id="stepsListForm">-->
                                    <div class="panel panel-default">
                                        <div class="panel-heading">
                                            <h3 class="panel-title">Steps</h3>
                                        </div>
                                        <div class="panel-body">
                                            <p:dataTable id="datalistStep" value="#{actionController.steps}" var="item"
                                                         selection="#{actionController.selectedStep}"
                                                         paginator="true"
                                                         rows="10"
                                                         rowsPerPageTemplate="10,20,30,40,50"
                                                         >

                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Processus"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.processus.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="Nom"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.nom}"/>
                                                </p:column>
                                                <p:column>
                                                    <f:facet name="header">
                                                        <h:outputText value="ProvideInterfaceItem"/>
                                                    </f:facet>
                                                    <h:outputText value="#{item.provideInterfaceItem.nom}"/>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <!--</h:form>-->
                                </div>
                            </div>
                            <h:commandButton id="suivantButton" class="btn btn-default" value="Save" actionListener="#{actionController.versContrainte()}" style="float:right;"/>
                        </div>

                    </p:tab>
                    <p:tab title="Contrainte">
                        <h:panelGrid columns="2" cellpadding="10">
                            <h:outputText value="Francis Ford Coppola's legendary..." />
                        </h:panelGrid>
                    </p:tab>
                    <p:tab title="Resultat">
                        <h:panelGrid columns="2" cellpadding="10">
                            <h:outputText value="After a break of more than 15 years..." />
                        </h:panelGrid>
                    </p:tab>
                </p:tabView>
            </h:form>

            <ui:include src="/step/Create.xhtml"/>  

        </ui:define>
    </ui:composition>
</html>

